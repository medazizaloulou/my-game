<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ù„Ø¹Ø¨Ø© Ø§Ù„Ù†Ù‚Ø± Ø§Ù„Ø³Ø±ÙŠØ¹</title>

<style>
body {
  font-family: Arial;
  text-align: center;
  background: #f2f2f2;
  margin: 0;
  overflow: hidden;
}

#box {
  width: 80px;
  height: 80px;
  background: red;
  position: absolute;
  display: none;
  cursor: pointer;
  border-radius: 10px;
}

button {
  margin: 5px;
  padding: 10px 20px;
  font-size: 16px;
  cursor: pointer;
}

#timeBarContainer {
  width: 80%;
  height: 20px;
  background: #ddd;
  margin: 10px auto;
  border-radius: 10px;
}

#timeBar {
  height: 100%;
  width: 100%;
  background: red;
  border-radius: 10px;
}
</style>
</head>

<body>

<h1>ğŸ® Ø§Ù„Ø¹Ø¨ ÙÙˆØ±Ù‹Ø§</h1>
<p id="score">Ø§Ù„Ù†Ù‚Ø§Ø·: 0</p>
<p id="timer">Ø§Ù„ÙˆÙ‚Øª: 30</p>

<div id="timeBarContainer">
  <div id="timeBar"></div>
</div>

<button id="startBtn">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
<button id="restartBtn" style="display:none;">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨</button>
<button id="stopBtn">Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù„Ø¹Ø¨Ø©</button>


<div id="box"></div>

<script>
// ===== Ø§Ù„Ø£ØµÙˆØ§Øª =====
let clickSound = new Audio("click.mp3");
clickSound.preload = "auto";

let startSound = new Audio("start.mp3");
startSound.preload = "auto";

// ===== Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø© =====
let score = 0;
let speed = 1500; // Ø³Ø±Ø¹Ø© Ø£Ø³Ù‡Ù„ Ù„Ù„Ù…Ø±Ø¨Ø¹
let timeLeft = 30;
let totalTime = 30;
let gameRunning = false;
let timerInterval;
let boxTimeout;

let box = document.getElementById("box");
let timeBar = document.getElementById("timeBar");

// ===== Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¨Ø¹Ø¯ ØµÙˆØª Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© (4 Ø«ÙˆØ§Ù†ÙŠ) =====
function startWithSound() {
  document.getElementById("startBtn").style.display = "none";

  // ğŸ”Š Ø´ØºÙ„ ØµÙˆØª Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
  startSound.currentTime = 0;
  startSound.play();

  // ğŸ•’ Ø§Ù†ØªØ¸Ø± 4 Ø«ÙˆØ§Ù†ÙŠ Ù‚Ø¨Ù„ Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
  setTimeout(() => {
    startGame();
  }, 4000); // Ø§Ù„ØªØ£Ø®ÙŠØ± 4 Ø«ÙˆØ§Ù†ÙŠ
}

// ===== Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© =====
function startGame() {
  score = 0;
  speed = 1500; // Ø³Ø±Ø¹Ø© Ø§Ù„Ù…Ø±Ø¨Ø¹
  timeLeft = totalTime;
  gameRunning = true;

  document.getElementById("score").innerText = "Ø§Ù„Ù†Ù‚Ø§Ø·: 0";
  document.getElementById("timer").innerText = "Ø§Ù„ÙˆÙ‚Øª: " + timeLeft;
  timeBar.style.width = "100%";

  document.getElementById("restartBtn").style.display = "inline-block";

  clearInterval(timerInterval);

  timerInterval = setInterval(() => {
    if (!gameRunning) return;
    timeLeft--;
    document.getElementById("timer").innerText = "Ø§Ù„ÙˆÙ‚Øª: " + timeLeft;
    timeBar.style.width = (timeLeft / totalTime * 100) + "%";

    if (timeLeft <= 0) endGame();
  }, 1000);

  showBox();
}

// ===== Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…Ø±Ø¨Ø¹ =====
function getRandomColor() {
  // ÙŠÙˆÙ„Ø¯ Ù„ÙˆÙ† HEX Ø¹Ø´ÙˆØ§Ø¦ÙŠ
  let letters = "0123456789ABCDEF";
  let color = "#";
  for (let i = 0; i < 6; i++) {
    color += letters[Math.floor(Math.random() * 16)];
  }
  return color;
}

function showBox() {
  if (!gameRunning) return;

  let x = Math.random() * (window.innerWidth - 100);
  let y = Math.random() * (window.innerHeight - 150);

  box.style.left = x + "px";
  box.style.top = y + "px";
  
  box.style.background = getRandomColor();  //ibadal lon
  box.style.display = "block";

  boxTimeout = setTimeout(() => {
    box.style.display = "none";
    speed -= 20;          // Ø³Ø±Ø¹Ø© Ø£Ø®Ù Ù„ØªØ³Ù‡ÙŠÙ„ Ø§Ù„Ù„Ø¹Ø¨Ø© ØªØ¯Ø±ÙŠØ¬ÙŠÙ‹Ø§
    if (speed < 800) speed = 800; // Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø³Ø±Ø¹Ø©
    showBox();
  }, speed);
}

// ===== Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø±Ø¨Ø¹ =====
box.onclick = function () {
  if (!gameRunning) return;
  clickSound.currentTime = 0;
  clickSound.play();

  score++;
  document.getElementById("score").innerText = "Ø§Ù„Ù†Ù‚Ø§Ø·: " + score;
};

// ===== Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù„Ø¹Ø¨Ø© =====
function endGame() {
  gameRunning = false;
  box.style.display = "none";

  clearInterval(timerInterval);
  clearTimeout(boxTimeout);

  alert("â° Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª!\nÙ†Ù‚Ø§Ø·Ùƒ: " + score);
}

// ===== Ø£Ø²Ø±Ø§Ø± =====
document.getElementById("startBtn").onclick = startWithSound;
document.getElementById("restartBtn").onclick = startWithSound;
document.getElementById("stopBtn").onclick = function() {
  if (!gameRunning) return; // Ø¥Ø°Ø§ Ø§Ù„Ù„Ø¹Ø¨Ø© Ù…Ø´ Ø´ØºØ§Ù„Ø©ØŒ Ù…Ø§ ÙŠØ¹Ù…Ù„ Ø´ÙŠØ¡
  gameRunning = false;
  box.style.display = "none";   // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù…Ø±Ø¨Ø¹
  clearInterval(timerInterval);  // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ
  clearTimeout(boxTimeout);      // Ø¥ÙŠÙ‚Ø§Ù Ø¸Ù‡ÙˆØ± Ø§Ù„Ù…Ø±Ø¨Ø¹
  alert("ğŸ›‘ ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù„Ø¹Ø¨Ø©!\nÙ†Ù‚Ø§Ø·Ùƒ: " + score);
};

</script>

</body>
</html>

